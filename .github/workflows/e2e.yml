name: E2E Tests

# NOTE: E2E tests are currently disabled because they depend on the deleted
# workspace-sdk and workspace-daemon packages. The workspace functionality
# has been consolidated into the nexusd package with a different architecture.
# 
# To re-enable E2E tests:
# 1. Rewrite tests to use the nexus CLI instead of workspace-sdk
# 2. Update docker-compose.test.yml to use nexusd images
# 3. Remove @nexus/workspace-sdk dependencies from e2e/package.json

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]

jobs:
  e2e-tests:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Set up Go
        uses: actions/setup-go@v5
        with:
          go-version: '1.24'
      
      - name: Verify nexusd builds
        run: |
          cd packages/nexusd
          go build -o nexusd ./cmd/daemon
          go build -o nexus ./cmd/cli
      
      - name: Run unit tests
        run: |
          cd packages/nexusd
          go test ./... -short
        env:
          SKIP_E2E: "true"
      
      - name: E2E Tests Status
        run: |
          echo "⚠️ E2E tests are temporarily disabled"
          echo "See workflow comments for details on re-enabling"
          echo "Workspace functionality is available via 'nexus workspace' commands"
